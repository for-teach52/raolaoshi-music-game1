<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¥¶è€å¸ˆçš„éŸ³ä¹å°æ¸¸æˆ ğŸ¹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Comic Sans MS", "å¹¼åœ†", "å¾®è½¯é›…é»‘", sans-serif;
        }

        body {
            background-color: #f8f9fa;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ff99cc' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
            padding: 30px;
            max-width: 800px;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .game-container::before {
            content: "";
            position: absolute;
            top: -50px;
            right: -50px;
            width: 200px;
            height: 200px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ff66cc'%3E%3Cpath d='M18 9v4H6V9H4v6h16V9h-2zm-2 2h-4v2h4v-2zM4 4h16v2H4V4zm0 14h12v2H4v-2z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            opacity: 0.1;
            transform: rotate(15deg);
        }

        .game-container::after {
            content: "";
            position: absolute;
            bottom: -50px;
            left: -50px;
            width: 200px;
            height: 200px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%236699ff'%3E%3Cpath d='M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6zm-2 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            opacity: 0.1;
            transform: rotate(-15deg);
        }

        .game-title {
            text-align: center;
            font-size: 2.5rem;
            color: #ff66cc;
            text-shadow: 2px 2px 0 #ffff99;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        button {
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            font-weight: bold;
        }

        button:hover {
            transform: scale(1.05);
        }

        .start-btn {
            background: linear-gradient(45deg, #66ccff, #ff66cc);
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.5rem;
            margin: 20px auto;
            display: block;
            box-shadow: 0 5px 15px rgba(102, 204, 255, 0.4);
        }

        .start-btn:active {
            transform: scale(0.98);
        }

        .question-area {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background-color: #f0f8ff;
            border-radius: 15px;
            border: 3px dashed #66ccff;
        }

        .question-text {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 20px;
        }

        .audio-btn {
            background: linear-gradient(45deg, #ffff99, #ffcc66);
            color: #333;
            padding: 12px 30px;
            border-radius: 50px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 10px rgba(255, 204, 102, 0.3);
        }

        .audio-icon {
            font-size: 1.2rem;
        }

        .options-area {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
        }

        .option-btn {
            background: linear-gradient(45deg, #ff99cc, #ff66cc);
            color: white;
            padding: 20px 15px;
            border-radius: 15px;
            border-bottom: 5px solid #cc3399;
            text-align: center;
        }

        .option-btn.correct {
            background: linear-gradient(45deg, #99ff99, #66cc66);
            border-bottom: 5px solid #339933;
        }

        .option-btn.wrong {
            background: linear-gradient(45deg, #ff9999, #ff6666);
            border-bottom: 5px solid #cc3333;
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        .score-board {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #fff8e6;
            padding: 15px 25px;
            border-radius: 50px;
            margin: 20px 0;
            border: 2px solid #ffcc66;
        }

        .score-text, .question-count {
            font-size: 1.2rem;
            color: #333;
            font-weight: bold;
        }

        .score-value {
            color: #ff6600;
            font-size: 1.5rem;
        }

        .instrument-info {
            background-color: #f9f0ff;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #cc99ff;
            margin: 20px 0;
        }

        .instrument-title {
            font-size: 1.2rem;
            color: #9933cc;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .instrument-desc {
            color: #555;
            line-height: 1.6;
        }

        .feedback-area {
            text-align: center;
            margin: 20px 0;
            min-height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .feedback-text {
            font-size: 1.5rem;
            font-weight: bold;
            padding: 10px 30px;
            border-radius: 50px;
            display: inline-block;
        }

        .feedback-correct {
            background-color: #e6ffe6;
            color: #339933;
            border: 2px solid #66cc66;
        }

        .feedback-wrong {
            background-color: #ffe6e6;
            color: #cc3333;
            border: 2px solid #ff6666;
        }

        .result-area {
            text-align: center;
            padding: 30px;
            background: linear-gradient(45deg, #66ccff, #ff99cc);
            border-radius: 20px;
            color: white;
            margin: 20px 0;
            box-shadow: 0 10px 20px rgba(102, 204, 255, 0.3);
        }

        .result-title {
            font-size: 1.8rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.2);
        }

        .result-score {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .restart-btn {
            background-color: white;
            color: #ff66cc;
            padding: 12px 40px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.3);
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .game-container {
                padding: 20px 15px;
            }

            .game-title {
                font-size: 2rem;
            }

            .options-area {
                grid-template-columns: 1fr;
            }

            .score-board {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .question-text {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 480px) {
            .game-title {
                font-size: 1.8rem;
            }

            .option-btn {
                padding: 15px 10px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="game-title">ğŸµ é¥¶è€å¸ˆçš„éŸ³ä¹å°æ¸¸æˆ ğŸ¹</h1>
        
        <button class="start-btn" id="startBtn">å¼€å§‹æ¸¸æˆ ğŸ®</button>
        
        <div class="game-main hidden" id="gameMain">
            <div class="score-board">
                <div class="score-text">å¾—åˆ†: <span class="score-value" id="score">0</span> åˆ†</div>
                <div class="question-count">ç¬¬ <span id="currentQuestion">1</span>/10 é¢˜</div>
            </div>
            
            <div class="question-area">
                <p class="question-text">è¿™æ®µéŸ³ä¹æ˜¯ç”±å“ªç§ä¹å™¨æ¼”å¥çš„ï¼Ÿ</p>
                <button class="audio-btn" id="audioBtn">
                    <span class="audio-icon">ğŸ”Š</span> æ’­æ”¾éŸ³ä¹
                </button>
            </div>
            
            <div class="options-area" id="optionsArea"></div>
            
            <div class="instrument-info" id="instrumentInfo">
                <h3 class="instrument-title" id="instrumentTitle">ä¹å™¨å°çŸ¥è¯†</h3>
                <p class="instrument-desc" id="instrumentDesc">å›ç­”é—®é¢˜åå°†æ˜¾ç¤ºè¯¥ä¹å™¨çš„ç‰¹ç‚¹ä»‹ç»å“¦ï½</p>
            </div>
            
            <div class="feedback-area" id="feedbackArea"></div>
            
            <div class="result-area hidden" id="resultArea">
                <h2 class="result-title" id="resultTitle">å¤ªæ£’å•¦ï¼ğŸ‰</h2>
                <p class="result-score" id="resultScore">ä½ å¾—äº† 0 åˆ†ï¼Œæ˜¯éŸ³ä¹å°è¾¾äººï½</p>
                <button class="restart-btn" id="restartBtn">é‡æ–°å¼€å§‹ ğŸ”„</button>
            </div>
        </div>
    </div>

    <script>
        // 1. æ¸¸æˆæ ¸å¿ƒæ•°æ®å®šä¹‰
        // ä¹å™¨åº“ï¼ˆåŒ…å«éŸ³é¢‘é“¾æ¥ã€ä»‹ç»ï¼Œä½¿ç”¨åœ¨çº¿éŸ³é¢‘ç¡®ä¿å¯è®¿é—®ï¼‰
       const instrumentLibrary = {
	é’¢ç´: {
	    name: "é’¢ç´",
	    audioUrl: "https://for-teach52.github.io/raolaoshi-music-game1/piano.mp3",
	    desc: "é’¢ç´æ˜¯è¥¿æ´‹å¤å…¸éŸ³ä¹ä¸­çš„ä¸€ç§é”®ç›˜ä¹å™¨ï¼Œæœ‰â€œä¹å™¨ä¹‹ç‹â€çš„ç¾ç§°ã€‚ç”±88ä¸ªç´é”®ï¼ˆ52ä¸ªç™½é”®ï¼Œ36ä¸ªé»‘é”®ï¼‰å’Œé‡‘å±å¼¦éŸ³æ¿ç»„æˆï¼ŒéŸ³åŸŸå®½å¹¿ï¼Œè¡¨ç°åŠ›ä¸°å¯Œï¼Œæ—¢èƒ½ç‹¬å¥ä¹Ÿèƒ½ä¼´å¥ã€‚"
	},
	å°æç´: {
	    name: "å°æç´",
	    audioUrl: "https://for-teach52.github.io/raolaoshi-music-game1/violin.mp3",
	    desc: "å°æç´æ˜¯ä¸€ç§å¼¦ä¹å™¨ï¼Œæœ‰â€œä¹å™¨çš‡åâ€ä¹‹ç§°ã€‚ç”±ç´å¤´ã€ç´é¢ˆã€ç´èº«ä¸‰éƒ¨åˆ†ç»„æˆï¼Œé ç´å¼“æ‘©æ“¦ç´å¼¦å‘å£°ï¼ŒéŸ³è‰²ä¼˜ç¾ï¼Œè¡¨ç°åŠ›å¼ºï¼Œæ˜¯ç®¡å¼¦ä¹é˜Ÿä¸­çš„æ ¸å¿ƒä¹å™¨ã€‚"
	},
	æ¶å­é¼“: {
	    name: "æ¶å­é¼“",
	    audioUrl: "https://for-teach52.github.io/raolaoshi-music-game1/drums.mp3",
	    desc: "æ¶å­é¼“æ˜¯çˆµå£«ä¹é˜Ÿä¸­é‡è¦çš„æ‰“å‡»ä¹å™¨ï¼Œç”±å¤šä¸ªé¼“å’Œé•²ç‰‡ç»„æˆã€‚æ²¡æœ‰å›ºå®šçš„éŸ³é«˜ï¼Œä¸»è¦ç”¨äºæ§åˆ¶èŠ‚å¥å’Œå¾‹åŠ¨ï¼Œæ˜¯ç°ä»£éŸ³ä¹ä¸­ä¸å¯æˆ–ç¼ºçš„èŠ‚å¥ä¹å™¨ã€‚"
	},
	é•¿ç¬›: {
	    name: "é•¿ç¬›",
	    audioUrl: "https://for-teach52.github.io/raolaoshi-music-game1/flute.mp3",
	    desc: "é•¿ç¬›æ˜¯ç°ä»£ç®¡å¼¦ä¹å’Œå®¤ä¹ä¸­ä¸»è¦çš„é«˜éŸ³æ—‹å¾‹ä¹å™¨ï¼Œå±äºæœ¨ç®¡ä¹å™¨ã€‚éŸ³è‰²æ¸…æ–°ã€é€å½»ï¼ŒéŸ³åŸŸå®½å¹¿ï¼Œæ—¢èƒ½æ¼”å¥æŠ’æƒ…æ—‹å¾‹ï¼Œä¹Ÿèƒ½æ¼”å¥å¿«é€Ÿçš„éŸ³é˜¶å’Œè£…é¥°éŸ³ã€‚"
	},
	å‰ä»–: {
	    name: "å‰ä»–",
	    audioUrl: "https://for-teach52.github.io/raolaoshi-music-game1/guitar.mp3",
	    desc: "å‰ä»–åˆè¯‘å…­å¼¦ç´ï¼Œå±äºå¼¹æ‹¨ä¹å™¨ã€‚é€šå¸¸æœ‰å…­æ¡å¼¦ï¼Œå½¢çŠ¶ä¸æç´ç›¸ä¼¼ï¼ŒéŸ³è‰²åœ†æ¶¦æ¸©æš–ï¼Œé€‚åˆæ°‘è°£ã€æ‘‡æ»šã€å¤å…¸ç­‰å¤šç§éŸ³ä¹é£æ ¼ï¼Œæ˜¯éå¸¸æµè¡Œçš„æ°‘é—´ä¹å™¨ã€‚"
	},
	å¤ç­: {
	    name: "å¤ç­",
	    audioUrl: "https://for-teach52.github.io/raolaoshi-music-game1/guzheng.mp3",
	    desc: "å¤ç­æ˜¯ä¸­å›½ä¼ ç»Ÿå¼¹æ‹¨å¼¦é¸£ä¹å™¨ï¼Œåˆåæ±‰ç­ã€ç§¦ç­ã€‚ä¸€èˆ¬ç”±äºŒåä¸€å¼¦ç»„æˆï¼ŒéŸ³è‰²æ¸…è„†æ‚¦è€³ï¼Œæ‚ æ‰¬åŠ¨å¬ï¼Œæ˜¯ä¸­å›½æ°‘æ—ä¹å™¨ä¸­æå…·ä»£è¡¨æ€§çš„ä¹å™¨ä¹‹ä¸€ã€‚"
	},
	å”¢å‘: {
	    name: "å”¢å‘",
	    audioUrl: "https://for-teach52.github.io/raolaoshi-music-game1/suona.mp3",
	    desc: "å”¢å‘æ˜¯ä¸­å›½æ°‘æ—å¹ç®¡ä¹å™¨çš„ä¸€ç§ï¼ŒéŸ³è‰²é«˜äº¢ã€å˜¹äº®ï¼Œç©¿é€åŠ›æå¼ºï¼Œå¸¸ç”¨äºæ°‘é—´å©šä¸§å«å¨¶ã€èŠ‚åº†å…¸ç¤¼ç­‰åœºåˆï¼Œæ˜¯æå…·ç‰¹è‰²çš„æ°‘é—´ä¹å™¨ã€‚"
	},
  	å£é£ç´: {
	    name: "å£é£ç´",
	    audioUrl: "https://for-teach52.github.io/raolaoshi-music-game1/harmonica.mp3",
	    desc: "å£é£ç´æ˜¯ä¸€ç§ç»“åˆäº†é”®ç›˜å’Œå¹å¥çš„ä¹å™¨ï¼Œä½“ç§¯å°å·§ã€éŸ³è‰²æ˜äº®ï¼Œæ“ä½œç®€å•ï¼Œéå¸¸é€‚åˆå„¿ç«¥éŸ³ä¹å¯è’™ï¼Œæ—¢èƒ½ç‹¬å¥ä¹Ÿèƒ½åˆå¥ã€‚"
	},
  	è¨å…‹æ–¯: {
	    name: "è¨å…‹æ–¯",
	    audioUrl: "https://for-teach52.github.io/raolaoshi-music-game1/saxphone.mp3",
	    desc: "è¨å…‹æ–¯æ˜¯ä¸€ç§æœ¨ç®¡ä¹å™¨ï¼Œå…¼å…·é“œç®¡ä¹å™¨çš„å˜¹äº®å’Œæœ¨ç®¡ä¹å™¨çš„æŸ”å’Œï¼ŒéŸ³è‰²ä¸°å¯Œå¤šå˜ï¼Œå¹¿æ³›åº”ç”¨äºçˆµå£«ã€æµè¡Œã€å¤å…¸ç­‰éŸ³ä¹é£æ ¼ã€‚"
	},
  	è‘«èŠ¦ä¸: {
	    name: "è‘«èŠ¦ä¸",
	    audioUrl: "https://for-teach52.github.io/raolaoshi-music-game1/hulusi.mp3",
	    desc: "è‘«èŠ¦ä¸åˆç§°â€œè‘«èŠ¦ç®«â€ï¼Œæ˜¯ä¸­å›½äº‘å—å°‘æ•°æ°‘æ—ç‰¹è‰²ä¹å™¨ï¼ŒéŸ³è‰²è½»æŸ”ç»†è…»ã€åœ†æ¶¦è´¨æœ´ï¼Œæ“…é•¿æ¼”å¥æŠ’æƒ…çš„æ°‘é—´æ›²è°ƒã€‚"
	    }
	};

        // æ¸¸æˆçŠ¶æ€å˜é‡
        let currentScore = 0; // å½“å‰å¾—åˆ†
        let currentQuestionNum = 1; // å½“å‰é¢˜ç›®æ•°
        let totalQuestions = 10; // æ€»é¢˜ç›®æ•°
        let currentInstrument = null; // å½“å‰ç­”é¢˜çš„ä¹å™¨
        let isAnswered = false; // æ˜¯å¦å·²ç»ç­”é¢˜
        let audioPlayer = new Audio(); // éŸ³é¢‘æ’­æ”¾å™¨

        // 2. DOMå…ƒç´ è·å–
        const startBtn = document.getElementById('startBtn');
        const gameMain = document.getElementById('gameMain');
        const scoreElement = document.getElementById('score');
        const currentQuestionElement = document.getElementById('currentQuestion');
        const audioBtn = document.getElementById('audioBtn');
        const optionsArea = document.getElementById('optionsArea');
        const instrumentTitle = document.getElementById('instrumentTitle');
        const instrumentDesc = document.getElementById('instrumentDesc');
        const feedbackArea = document.getElementById('feedbackArea');
        const resultArea = document.getElementById('resultArea');
        const resultTitle = document.getElementById('resultTitle');
        const resultScore = document.getElementById('resultScore');
        const restartBtn = document.getElementById('restartBtn');

        // 3. å·¥å…·å‡½æ•°
        // éšæœºè·å–ä¸€ä¸ªä¹å™¨
        function getRandomInstrument() {
            const instrumentNames = Object.keys(instrumentLibrary);
            const randomIndex = Math.floor(Math.random() * instrumentNames.length);
            return instrumentLibrary[instrumentNames[randomIndex]];
        }

        // ç”Ÿæˆé€‰é¡¹ï¼ˆ1ä¸ªæ­£ç¡®+3ä¸ªé”™è¯¯ï¼‰
        function generateOptions(correctInstrument) {
            const allInstruments = Object.values(instrumentLibrary);
            // è¿‡æ»¤æ‰æ­£ç¡®ç­”æ¡ˆï¼Œéšæœºé€‰3ä¸ªé”™è¯¯é€‰é¡¹
            const wrongOptions = allInstruments
                .filter(instr => instr.name !== correctInstrument.name)
                .sort(() => 0.5 - Math.random())
                .slice(0, 3);
            // åˆå¹¶æ­£ç¡®å’Œé”™è¯¯é€‰é¡¹ï¼Œå†æ‰“ä¹±é¡ºåº
            const allOptions = [correctInstrument, ...wrongOptions].sort(() => 0.5 - Math.random());
            return allOptions;
        }

        // æ¸²æŸ“é¢˜ç›®
        function renderQuestion() {
            // é‡ç½®çŠ¶æ€
            isAnswered = false;
            feedbackArea.innerHTML = '';
            instrumentTitle.textContent = 'ä¹å™¨å°çŸ¥è¯†';
            instrumentDesc.textContent = 'å›ç­”é—®é¢˜åå°†æ˜¾ç¤ºè¯¥ä¹å™¨çš„ç‰¹ç‚¹ä»‹ç»å“¦ï½';
            
            // è·å–éšæœºä¹å™¨
            currentInstrument = getRandomInstrument();
            // ç”Ÿæˆé€‰é¡¹
            const options = generateOptions(currentInstrument);
            
            // æ¸²æŸ“é€‰é¡¹æŒ‰é’®
            optionsArea.innerHTML = '';
            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = option.name;
                btn.dataset.instrument = option.name;
                btn.addEventListener('click', handleOptionClick);
                optionsArea.appendChild(btn);
            });

            // æ›´æ–°é¢˜ç›®æ•°æ˜¾ç¤º
            currentQuestionElement.textContent = currentQuestionNum;
        }

        // æ’­æ”¾éŸ³é¢‘
        function playAudio() {
	if (currentInstrument) {
        	    audioPlayer.src = currentInstrument.audioUrl;
        	    audioPlayer.crossOrigin = "anonymous"; // æ–°å¢ï¼šå…è®¸è·¨åŸŸæ’­æ”¾ï¼Œæ›´ç¨³å®š
        	    audioPlayer.play().catch(err => {
            		alert('éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š1.ç½‘ç»œæ˜¯å¦æ­£å¸¸ 2.GitHubé‡Œçš„éŸ³é¢‘æ–‡ä»¶åå’Œä»£ç é‡Œçš„æ˜¯å¦ä¸€è‡´ 3.æµè§ˆå™¨æ˜¯å¦å…è®¸æ’­æ”¾éŸ³é¢‘');
            		console.error('éŸ³é¢‘æ’­æ”¾é”™è¯¯:', err);
                });
            }
        }

        // å¤„ç†é€‰é¡¹ç‚¹å‡»
        function handleOptionClick(e) {
            if (isAnswered) return; // å·²ç­”é¢˜åˆ™ä¸å†å“åº”
            isAnswered = true;

            const selectedBtn = e.target;
            const selectedName = selectedBtn.dataset.instrument;
            const isCorrect = selectedName === currentInstrument.name;

            // ç¦ç”¨æ‰€æœ‰é€‰é¡¹æŒ‰é’®
            const allOptionBtns = document.querySelectorAll('.option-btn');
            allOptionBtns.forEach(btn => {
                btn.disabled = true;
                // æ ‡è®°æ­£ç¡®/é”™è¯¯
                if (btn.dataset.instrument === currentInstrument.name) {
                    btn.classList.add('correct');
                } else if (btn === selectedBtn && !isCorrect) {
                    btn.classList.add('wrong');
                }
            });

            // æ˜¾ç¤ºåé¦ˆ
            const feedbackText = document.createElement('div');
            feedbackText.className = `feedback-text ${isCorrect ? 'feedback-correct' : 'feedback-wrong'}`;
            feedbackText.textContent = isCorrect ? 'âœ… å›ç­”æ­£ç¡®ï¼' : `âŒ å›ç­”é”™è¯¯ï¼Œæ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${currentInstrument.name}`;
            feedbackArea.appendChild(feedbackText);

            // æ˜¾ç¤ºä¹å™¨ä»‹ç»
            instrumentTitle.textContent = `${currentInstrument.name} ğŸµ`;
            instrumentDesc.textContent = currentInstrument.desc;

            // æ›´æ–°å¾—åˆ†
            if (isCorrect) {
                currentScore += 10;
                scoreElement.textContent = currentScore;
            }

            // å»¶è¿Ÿè¿›å…¥ä¸‹ä¸€é¢˜/æ˜¾ç¤ºç»“æœ
            setTimeout(() => {
                if (currentQuestionNum < totalQuestions) {
                    // ä¸‹ä¸€é¢˜
                    currentQuestionNum++;
                    renderQuestion();
                } else {
                    // æ¸¸æˆç»“æŸï¼Œæ˜¾ç¤ºç»“æœ
                    showResult();
                }
            }, 2000);
        }

        // æ˜¾ç¤ºæ¸¸æˆç»“æœ
        function showResult() {
            resultArea.classList.remove('hidden');
            // æ ¹æ®å¾—åˆ†æ˜¾ç¤ºä¸åŒè¯„è¯­
            if (currentScore === 100) {
                resultTitle.textContent = 'æ»¡åˆ†ï¼ğŸ–ï¸ éŸ³ä¹å°å¤©æ‰ï¼';
                resultScore.textContent = `ä½ å¾—äº† ${currentScore} åˆ†ï¼Œå¤ªå‰å®³å•¦ï¼`;
            } else if (currentScore >= 70) {
                resultTitle.textContent = 'è¶…æ£’ï¼ğŸ‰';
                resultScore.textContent = `ä½ å¾—äº† ${currentScore} åˆ†ï¼Œæ˜¯éŸ³ä¹å°è¾¾äººï½`;
            } else if (currentScore >= 40) {
                resultTitle.textContent = 'ä¸é”™å“¦ï¼ğŸ’ª';
                resultScore.textContent = `ä½ å¾—äº† ${currentScore} åˆ†ï¼Œç»§ç»­åŠ æ²¹ï¼`;
            } else {
                resultTitle.textContent = 'ç»§ç»­åŠªåŠ›ï¼ğŸŒŸ';
                resultScore.textContent = `ä½ å¾—äº† ${currentScore} åˆ†ï¼Œå¤šå¬å¬ä¹å™¨å£°éŸ³å°±ä¼šæ›´æ£’å•¦ï½`;
            }
        }

        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            currentScore = 0;
            currentQuestionNum = 1;
            scoreElement.textContent = 0;
            resultArea.classList.add('hidden');
            renderQuestion();
        }

        // 4. äº‹ä»¶ç›‘å¬
        // å¼€å§‹æ¸¸æˆ
        startBtn.addEventListener('click', () => {
            startBtn.classList.add('hidden');
            gameMain.classList.remove('hidden');
            resetGame();
        });

        // æ’­æ”¾éŸ³é¢‘
        audioBtn.addEventListener('click', playAudio);

        // é‡æ–°å¼€å§‹æ¸¸æˆ
        restartBtn.addEventListener('click', resetGame);

        // 5. é¡µé¢åŠ è½½å®Œæˆåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // åˆå§‹åŒ–éŸ³é¢‘æ’­æ”¾å™¨
            audioPlayer.volume = 0.7;
            // æ–°å¢ï¼šé¢„åŠ è½½æ‰€æœ‰ä¹å™¨éŸ³é¢‘ï¼ˆæå‡æ’­æ”¾ç¨³å®šæ€§ï¼‰
            Object.values(instrumentLibrary).forEach(instr => {
                const preloadAudio = new Audio(instr.audioUrl);
                preloadAudio.load(); // æå‰åŠ è½½éŸ³é¢‘èµ„æº
            });
        });
    </script>
</body>
</html>